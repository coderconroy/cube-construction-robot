%%
%%  Department of Electrical, Electronic and Computer Engineering.
%%  EPR400/2 Final Report - Section 6.
%%  Copyright (C) 2011-2021 University of Pretoria.
%%

\section{Conclusion}

\subsection{Summary of the work completed}

This report details the work that was performed during the design and development of a robotic system with the overarching goal of constructing arbitrary 3d shapes using small construction cubes.

A literature study was undertaken into computer vision approaches to object detection, with a focus on traditional techniques, as well 3D object localisation methods and their application to the robotics domain. Firstly, a gantry robot was designed from first principles and manufactured using a combination of 3D printing and metal machining technologies. Following this, the hardware of embedded robot control circuit was designed from first principles and a prototype was created on a breadboard. The software was implemented on the embedded controller using C. A PCB was designed for the circuit and sent for manufacturing overseas.

A 3D render based GUI was developed using a low-level graphics API to facilitate the definition of 3D shapes. A computer vision system was developed to detect and localise the cubes within the robot's workspace. Finally, PC-based software was developed to integrate the shape definition GUI and computer vision components as well as to control the robot. A number of test shapes were defined using the shape definition GUI and constructed closed loop by the gantry robot supported by the computer vision system.

\subsection{Summary of the observations and findings}

The system developed, which had a PC-based software component and a robotic system as its primary two constituents, was successful in fulfilling the overarching goal of constructing arbitrary 3D shapes using small construction cubes. The system was capable of constructing all test shapes that met the minimum specifications of containing 30 cubes with at least four cubes in height. In addition, the system was capable of constructing shapes up to six cubes in height that contained arbitrary cube rotations about the z-axis, partially supported cubes, small inter-cube tolerances and leaning cube stacks.

The system was able to perform the construction closed loop by using the computer vision system to assist in handling unexpected events. Specifically, the system was able to successfully detect, re-grip and re-orient the cube in the dropped cube case and issue a construction failure signal in the structural damage case. A gantry robot approach with a design focus on the rigidity of the mechanical component was found to be a successful approach to the cube construction task. Furthermore, the pin-hole camera model based approach to 3D cube localisation component of the through mapping image coordinate system to the world coordinate system was found to be a robust solution for the computer vision component of this task.

\subsection{Contribution}

The domain of mechanical design for robots and the construction needed to be explored to complete this project. In particular, the domain of CAD software, and specifically the Fusion 360 CAD software package, needed to be mastered to assist in the creation of the mechanical component of the \textit{Robotic System}. Furthermore, an understanding of the functionality and applicability of a number of mechanical components, including linear drive and linear motion systems, needed to be acquired. In particular, this included the integration and control of servo and stepper motors. The mechanical construction required the attainment of knowledge to facilitate the direct use of a 3D printer as well as metal machining tools such as a lathe and milling machine. All of the aforementioned components are common in a Mechanical Engineering undergraduate course but are all non-existent in a Computer Engineering undergraduate course. The study leader provided helpful guidance in terms of highlighting the challenging aspects of the mechanical design which should be focused on as well as favorable characteristics that should form part of the design.

A combination of new theory and the approaches arising from this theory needed to be mastered in the computer vision domain. Specifically, traditional computer vision techniques used for object detection needed to be understood and implemented as well as 3D localisation approaches. In service of the latter aspect, knowledge of the pin-hole camera model needed to be acquired and used in mapping between the image coordinate system and world coordinate system. This approach followed from the study leader's suggestion to use and explanation of camera intrinsics and extrinsics. Furthermore, knowledge of the computer vision library OpenCV was acquired to support the computer vision system development at various stages. None of this computer vision knowledge is covered by undergraduate modules. 

In a number of undergraduate modules, first principles 8-bit microcontroller development and 32-bit microcontroller development boards with hardware abstraction libraries were explored. The first principles development of embedded software for a 32-bit microcontroller as well s the complete first principles design of the controller circuit required the attainment of new knowledge. Furthermore, the development of a PCB for the controller required the PCB design software KiCAD to be mastered. Lastly, for the shape definition component, new knowledge about the theory relating to the graphics pipeline and transformation matrices used in 3D graphics rendering needed to be acquired. The use of the low-level graphics API OpenGL needed to be understood for this purpose.

There were no novel software algorithms or hardware circuits developed in this project. However, the design of the mechanical component of the \textit{Robotic System}, the hardware of the embedded controller circuit, the embedded software, the 3D rendering software, the computer vision software and system controller was completely from first principles which resulted in unique designs and implementations for each of these facets. During the course of the development of these components, the study leader highlighted the challenging facets of each which should receive the requisite attention.

Libraries were relied on heavily during the initial design and prototyping phase for the computer vision system and embedded controller. The embedded controller implementation was converted completely to a first principles implementation. The core aspects of the computer vision system were developed from first principles while basic image processing functions were retained from the OpenCV library. The calibration aspects of the computer vision component were also considered as not a core aspect of the computer vision system and OpenCV was used for this purpose. Lastly, the high-level idea for the approach to the custom square corner detection algorithm was inspired by a student in the same research group in their approach to detecting puzzle-piece corners. However, the design and implementation of this algorithm was from first principles and only loosely related. 

\subsection{Future work}

The success of the design of the robotic subsystem provides a solid foundation for further development going forward. The first aspect should be investigated further is the improvement of the cube localisation accuracy of the computer vision system to improve the tolerance used for shapes constructed in a closed loop manner. Secondly, the use of a stereo vision computer vision approach or an ToF camera over the monocular vision approach used in this project are possible future avenues of exploration that would eliminate the need to assume the z-plane in which a cube is detected. In addition, relatively simplistic path planning approaches were used in this project. Therefore, a possible avenue of improvement would involve an investigation into the use of more sophisticated path planning approaches. 

For a given construction sequence, the cubes are made available to the robot by placing the cubes in pre-defined locations. An alternative approach that should be explored involves the arbitrary initial placement of the cubes within the robot's workspace followed by the implementation of an algorithm that would allow the robot to detect the cubes and construct the shape from this initial state. Finally, on a related note, it was observed that one of the main sources of inaccuracy in the system was the deviations introduced when the robot gripped the \textit{source cube} for construction. Therefore, further work into improving the accuracy of the \textit{source cube} attainment mechanism should be done.

\newpage

%% End of File.


